<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Biên Bản Khảo Sát Hiện Trường</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Times New Roman', sans-serif; background-color: #f3f4f6; }
        .a4-paper { background: white; max-width: 210mm; margin: 0 auto; padding: 10mm; box-shadow: 0 0 10px rgba(0,0,0,0.1); min-height: 297mm; }
        input, textarea, select { font-family: 'Times New Roman', sans-serif; }
        
        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .a4-paper { padding: 15px; width: 100%; max-width: 100%; }
            body { background-color: white; }
        }

        .input-line {
            border: none;
            border-bottom: 1px dotted #9ca3af;
            width: 100%;
            outline: none;
            background: transparent;
            padding: 2px 0;
            color: #1f2937;
            font-weight: 500;
        }
        .input-line:focus { border-bottom: 1px solid #2563eb; }
        
        .section-title { font-weight: bold; margin-top: 1rem; margin-bottom: 0.5rem; }
        
        /* Table Styles */
        table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; font-size: 14px; }
        th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; vertical-align: top; }
        th { background-color: #f9fafb; font-weight: bold; text-align: center; }
        
        /* Quick Tag Button */
        .tag-btn {
            display: inline-flex; align-items: center; gap: 4px;
            padding: 4px 8px; border-radius: 9999px;
            font-size: 12px; font-weight: 500;
            background-color: #eff6ff; color: #1d4ed8;
            border: 1px solid #bfdbfe; cursor: pointer;
            transition: all 0.2s; white-space: nowrap;
        }
        .tag-btn:active { transform: scale(0.95); background-color: #dbeafe; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const { Save, Plus, Trash2, FileText, Share2, Printer } = lucide;

    // --- DATA MẪU NHÂN SỰ ---
    const STAFF_LIST = [
        "Cao Thành Tân",
        "Nguyễn Văn Tâm",
        "Lê Thành Được",
        "Nguyễn Nhựt Minh",
        "Trần Văn A",
        "Lê Văn B"
    ];

    const POSITIONS = [
        "",
        "CHTT",
        "GSAT",
        "TT", 
        "KTV", 
        "CN",  
        "Đội trưởng",
        "Đội phó"
    ];

    const UNITS = [
        "",
        "ĐQLĐCP", 
        "ĐQLĐTC", 
        "P.KTAT",
        "P.KHKT"
    ];

    // --- COMPONENT CHỌN GIỜ 24H (Full 60 phút) ---
    const TimeSelect = ({ value, onChange }) => {
        // Tách chuỗi HH:mm thành giờ và phút
        const [hour, minute] = value ? value.split(':') : ['07', '00'];
        
        // Tạo mảng Giờ: 00 -> 23
        const hours = Array.from({length: 24}, (_, i) => i.toString().padStart(2, '0'));
        
        // Tạo mảng Phút: 00 -> 59 (Đủ 60 phút)
        const minutes = Array.from({length: 60}, (_, i) => i.toString().padStart(2, '0')); 

        const handleChange = (type, val) => {
            let newH = hour;
            let newM = minute;
            if (type === 'h') newH = val;
            if (type === 'm') newM = val;
            onChange(`${newH}:${newM}`);
        };

        return (
            <div className="inline-flex items-center border-b-2 border-gray-300 hover:border-blue-500 bg-transparent gap-0 transition-colors">
                <select value={hour} onChange={(e) => handleChange('h', e.target.value)} 
                        className="appearance-none bg-transparent font-bold text-center outline-none cursor-pointer p-1 text-gray-800 hover:bg-gray-100 rounded">
                    {hours.map(h => <option key={h} value={h}>{h}</option>)}
                </select>
                <span className="font-bold px-0.5">:</span>
                <select value={minute} onChange={(e) => handleChange('m', e.target.value)} 
                        className="appearance-none bg-transparent font-bold text-center outline-none cursor-pointer p-1 text-gray-800 hover:bg-gray-100 rounded">
                    {minutes.map(m => <option key={m} value={m}>{m}</option>)}
                </select>
            </div>
        );
    };

    // --- COMPONENT NHẬP LIỆU NHANH ---
    const QuickInputSection = ({ title, value, onChange, templates, placeholder, contextData }) => {
        const addTemplate = (template) => {
            let textToAdd = template;
            if (contextData) {
                textToAdd = textToAdd
                    .replace(/{tru}/g, contextData.tru || "...")
                    .replace(/{tuyen}/g, contextData.tuyen || "...");
            }
            const newValue = value ? value + "\n" + textToAdd : textToAdd;
            onChange(newValue);
        };

        return (
            <div className="mb-4">
                <label className="section-title block text-gray-800">{title}</label>
                <div className="flex gap-2 overflow-x-auto no-scrollbar mb-2 pb-1">
                    {templates.map((t, i) => (
                        <button key={i} onClick={() => addTemplate(t.content)} className="tag-btn flex-shrink-0">
                            <i data-lucide="plus" width="12" height="12"></i> {t.label}
                        </button>
                    ))}
                    <button onClick={() => onChange("")} className="tag-btn flex-shrink-0 bg-red-50 text-red-600 border-red-200">
                        Xóa
                    </button>
                </div>
                <textarea 
                    className="w-full border rounded p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                    rows="4"
                    value={value}
                    onChange={(e) => onChange(e.target.value)}
                    placeholder={placeholder}
                ></textarea>
            </div>
        );
    };

    // --- COMPONENT CHÍNH ---
    const App = () => {
        const [formData, setFormData] = useState({
            // Header
            donVi: "ĐỘI QUẢN LÝ ĐIỆN CHÂU PHÚ",
            ngay: new Date().getDate(),
            thang: new Date().getMonth() + 1,
            nam: new Date().getFullYear(),
            gioKhaoSat: "07:30", // Chuẩn 24h
            diaDiemKhaoSat: "trụ 478CD/259/4 tuyến 478 Cái Dầu",
            
            // 1. Đơn vị công tác
            dvct_daiDien1: "Cao Thành Tân", dvct_chucVu1: "CHTT",
            dvct_daiDien2: "", dvct_chucVu2: "",
            
            // 2. Đơn vị QLVH
            qlvh_daiDien1: "Nguyễn Văn Tâm", qlvh_chucVu1: "TT", qlvh_donVi1: "ĐQLĐCP",
            qlvh_daiDien2: "", qlvh_chucVu2: "", qlvh_donVi2: "",
            
            // 3. Đơn vị liên quan
            dv_lienQuan: "",

            // Nội dung công việc
            muc4_diaDiem: "Tại TBA KDC OLV 1 trụ 478CD/259/4...",
            muc5_noiDung: "Thay điện kế định kỳ",
            muc6_phamVi: "Tại tủ điện kế trụ 478CD/259/4...",
            muc7_thoiGianTu: "08:00", muc7_thoiGianDen: "17:00", muc7_ngay: "2026-01-06",

            // 8. Đánh giá rủi ro
            ruiRo_items: [
                { moiNguy: "Phóng điện", moTa: "Điện hạ áp giật...", bac: "II", bienPhap: "Thực hiện đúng quy trình an toàn..." },
                { moiNguy: "Ngã cao", moTa: "Làm việc trên xe gàu...", bac: "II", bienPhap: "Đeo dây an toàn, đội mũ..." }
            ],
            ruiRo_ghiChu: "",

            // 9. Trách nhiệm
            muc9a_catDien: "", 
            muc9b_anToan: "- Chuẩn bị đầy đủ trang thiết bị, dụng cụ thi công.\n- Trang bị đầy đủ BHLĐ.\n- Không vượt khỏi phạm vi làm việc.\n- Trả điện đúng giờ.",
            muc9c_dieuDo: "",
            muc9d_khac: "",
            
            // Footer
            soBan: "02"
        });

        useEffect(() => {
            lucide.createIcons();
        });

        const tags9a = [
            { label: "Cắt CB", content: "- Cắt CB trụ {tru}" },
            { label: "Cắt 3 FCO", content: "- Cắt 03FCO trụ {tru}" },
            { label: "Cắt 2 FCO", content: "- Cắt 02FCO trụ {tru}" },
            { label: "Tiếp địa HA", content: "- Thử điện, tiếp địa hạ áp 01 bộ tại trụ {tru}" },
            { label: "Tháo lèo", content: "- Tháo 03 nối rẽ trụ {tru}" },
            { label: "Khóa tủ", content: "- Khóa tủ CB trụ {tru}" }
        ];

        const tags9b = [
            { label: "Mẫu chuẩn", content: "- Chuẩn bị đầy đủ trang thiết bị, dụng cụ thi công.\n- Trang bị đầy đủ BHLĐ.\n- Không vượt khỏi phạm vi làm việc.\n- Trả điện đúng giờ." },
            { label: "Thêm dây an toàn", content: "- Sử dụng dây an toàn 2 móc khi leo cao." },
            { label: "Thêm rào chắn", content: "- Đặt rào chắn, biển báo an toàn." }
        ];

        const handleExport = () => {
            console.log("Dữ liệu xuất:", formData);
            alert("Đã lưu dữ liệu! Chức năng xuất file .doc sẽ được xử lý ở server.");
        };

        const updateRiskRow = (index, field, value) => {
            const newRisks = [...formData.ruiRo_items];
            newRisks[index][field] = value;
            setFormData({...formData, ruiRo_items: newRisks});
        };

        const addRiskRow = () => {
            setFormData({
                ...formData, 
                ruiRo_items: [...formData.ruiRo_items, { moiNguy: "", moTa: "", bac: "", bienPhap: "" }]
            });
        };

        const removeRiskRow = (index) => {
            const newRisks = formData.ruiRo_items.filter((_, i) => i !== index);
            setFormData({...formData, ruiRo_items: newRisks});
        };

        const getContextData = () => {
            const match = formData.diaDiemKhaoSat.match(/trụ\s+([^\s]+)/i);
            const tru = match ? match[1] : "...";
            return { tru: tru, tuyen: "..." };
        };

        return (
            <div className="pb-20">
                {/* TOOLBAR MOBILE */}
                <div className="fixed bottom-0 left-0 right-0 bg-white border-t p-3 flex justify-between items-center z-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
                    <div className="text-xs text-gray-500">Mẫu 04 - KSHT</div>
                    <button onClick={handleExport} className="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 active:bg-blue-700">
                        <i data-lucide="save"></i> Lưu & Xuất
                    </button>
                </div>

                <div className="a4-paper">
                    
                    {/* HEADER */}
                    <div className="flex justify-between mb-6 text-center text-sm">
                        <div className="w-1/2">
                            <div className="font-bold uppercase">CÔNG TY ĐIỆN LỰC AN GIANG</div>
                            <input className="input-line text-center uppercase font-bold" value={formData.donVi} onChange={e => setFormData({...formData, donVi: e.target.value})} />
                            <hr className="w-1/3 mx-auto mt-1 border-gray-400" />
                        </div>
                        <div className="w-1/2">
                            <div className="font-bold uppercase">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</div>
                            <div className="font-bold underline decoration-1 underline-offset-4">Độc lập - Tự do - Hạnh phúc</div>
                            <div className="mt-2 italic">
                                Châu Phú, ngày <input type="number" className="w-8 text-center border-b border-gray-300 outline-none" value={formData.ngay} onChange={e => setFormData({...formData, ngay: e.target.value})} />
                                tháng <input type="number" className="w-8 text-center border-b border-gray-300 outline-none" value={formData.thang} onChange={e => setFormData({...formData, thang: e.target.value})} />
                                năm <input type="number" className="w-12 text-center border-b border-gray-300 outline-none" value={formData.nam} onChange={e => setFormData({...formData, nam: e.target.value})} />
                            </div>
                        </div>
                    </div>

                    <h1 className="text-xl font-bold text-center mb-4 uppercase">BIÊN BẢN KHẢO SÁT HIỆN TRƯỜNG</h1>

                    <div className="mb-4 text-justify flex items-center flex-wrap gap-1">
                        Vào hồi 
                        {/* Time Select Custom */}
                        <div className="mx-2">
                            <TimeSelect value={formData.gioKhaoSat} onChange={(val) => setFormData({...formData, gioKhaoSat: val})} />
                        </div>
                        tại <input className="input-line w-auto inline-block min-w-[200px] flex-grow" value={formData.diaDiemKhaoSat} onChange={e => setFormData({...formData, diaDiemKhaoSat: e.target.value})} />
                    </div>

                    <div className="mb-2 font-bold">Chúng tôi gồm:</div>

                    {/* 1. ĐƠN VỊ CÔNG TÁC */}
                    <div className="mb-4 pl-4">
                        <div className="font-bold">1. Đại diện đơn vị làm công việc:</div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pl-4 mt-2">
                            {/* 1.1 */}
                            <div className="flex flex-col gap-1 border p-2 rounded bg-gray-50 border-dashed border-gray-300">
                                <div className="flex gap-2 items-center">
                                    <span className="font-semibold text-sm">1.1 Ông (Bà):</span>
                                    <input list="staff-list" className="input-line flex-grow font-bold text-blue-800" value={formData.dvct_daiDien1} onChange={e => setFormData({...formData, dvct_daiDien1: e.target.value})} placeholder="Chọn hoặc nhập tên..." />
                                </div>
                                <div className="flex gap-2 items-center">
                                    <span className="text-sm">Chức vụ:</span>
                                    <select className="input-line flex-grow bg-transparent" value={formData.dvct_chucVu1} onChange={e => setFormData({...formData, dvct_chucVu1: e.target.value})}>
                                        {POSITIONS.map(p => <option key={p} value={p}>{p}</option>)}
                                    </select>
                                </div>
                            </div>
                            
                            {/* 1.2 */}
                            <div className="flex flex-col gap-1 border p-2 rounded bg-gray-50 border-dashed border-gray-300">
                                <div className="flex gap-2 items-center">
                                    <span className="font-semibold text-sm">1.2 Ông (Bà):</span>
                                    <input list="staff-list" className="input-line flex-grow font-bold text-blue-800" value={formData.dvct_daiDien2} onChange={e => setFormData({...formData, dvct_daiDien2: e.target.value})} placeholder="Chọn hoặc nhập tên..." />
                                </div>
                                <div className="flex gap-2 items-center">
                                    <span className="text-sm">Chức vụ:</span>
                                    <select className="input-line flex-grow bg-transparent" value={formData.dvct_chucVu2} onChange={e => setFormData({...formData, dvct_chucVu2: e.target.value})}>
                                        {POSITIONS.map(p => <option key={p} value={p}>{p}</option>)}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* 2. ĐƠN VỊ QLVH */}
                    <div className="mb-4 pl-4">
                        <div className="font-bold">2. Đại diện (các) đơn vị quản lý vận hành:</div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pl-4 mt-2">
                            {/* 2.1 */}
                            <div className="flex flex-col gap-1 border p-2 rounded bg-gray-50 border-dashed border-gray-300">
                                <div className="flex gap-2 items-center">
                                    <span className="font-semibold text-sm">2.1 Ông (Bà):</span>
                                    <input list="staff-list" className="input-line flex-grow font-bold text-blue-800" value={formData.qlvh_daiDien1} onChange={e => setFormData({...formData, qlvh_daiDien1: e.target.value})} placeholder="Chọn hoặc nhập tên..." />
                                </div>
                                <div className="flex gap-2">
                                    <div className="flex items-center w-1/2 gap-1">
                                        <span className="text-sm">CV:</span>
                                        <select className="input-line bg-transparent" value={formData.qlvh_chucVu1} onChange={e => setFormData({...formData, qlvh_chucVu1: e.target.value})}>
                                            {POSITIONS.map(p => <option key={p} value={p}>{p}</option>)}
                                        </select>
                                    </div>
                                    <div className="flex items-center w-1/2 gap-1">
                                        <span className="text-sm">ĐV:</span>
                                        <select className="input-line bg-transparent" value={formData.qlvh_donVi1} onChange={e => setFormData({...formData, qlvh_donVi1: e.target.value})}>
                                            {UNITS.map(u => <option key={u} value={u}>{u}</option>)}
                                        </select>
                                    </div>
                                </div>
                            </div>

                            {/* 2.2 */}
                            <div className="flex flex-col gap-1 border p-2 rounded bg-gray-50 border-dashed border-gray-300">
                                <div className="flex gap-2 items-center">
                                    <span className="font-semibold text-sm">2.2 Ông (Bà):</span>
                                    <input list="staff-list" className="input-line flex-grow font-bold text-blue-800" value={formData.qlvh_daiDien2} onChange={e => setFormData({...formData, qlvh_daiDien2: e.target.value})} placeholder="Chọn hoặc nhập tên..." />
                                </div>
                                <div className="flex gap-2">
                                    <div className="flex items-center w-1/2 gap-1">
                                        <span className="text-sm">CV:</span>
                                        <select className="input-line bg-transparent" value={formData.qlvh_chucVu2} onChange={e => setFormData({...formData, qlvh_chucVu2: e.target.value})}>
                                            {POSITIONS.map(p => <option key={p} value={p}>{p}</option>)}
                                        </select>
                                    </div>
                                    <div className="flex items-center w-1/2 gap-1">
                                        <span className="text-sm">ĐV:</span>
                                        <select className="input-line bg-transparent" value={formData.qlvh_donVi2} onChange={e => setFormData({...formData, qlvh_donVi2: e.target.value})}>
                                            {UNITS.map(u => <option key={u} value={u}>{u}</option>)}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* DATALIST CHO TÊN NHÂN VIÊN */}
                    <datalist id="staff-list">
                        {STAFF_LIST.map((name, i) => <option key={i} value={name} />)}
                    </datalist>

                    {/* 3. ĐƠN VỊ LIÊN QUAN */}
                    <div className="mb-4 pl-4">
                        <div className="font-bold">3. Đại diện các đơn vị có liên quan:</div>
                        <textarea className="input-line pl-4 resize-none" rows="2" value={formData.dv_lienQuan} onChange={e => setFormData({...formData, dv_lienQuan: e.target.value})} placeholder="..."></textarea>
                    </div>

                    <div className="mb-4 italic text-sm text-gray-600">
                        Cùng nhau khảo sát thực tế, trao đổi và thống nhất phân công trách nhiệm thực hiện những nội dung để đảm bảo an toàn về điện cho đơn vị công tác khi tiến hành công việc, cụ thể như sau:
                    </div>

                    {/* 4, 5, 6, 7. NỘI DUNG CÔNG VIỆC */}
                    <div className="space-y-3 mb-6">
                        <div>
                            <span className="font-bold">4. Địa điểm (hoặc thiết bị) thực hiện công việc:</span>
                            <textarea className="input-line" rows="2" value={formData.muc4_diaDiem} onChange={e => setFormData({...formData, muc4_diaDiem: e.target.value})}></textarea>
                        </div>
                        <div>
                            <span className="font-bold">5. Nội dung công việc:</span>
                            <input className="input-line" value={formData.muc5_noiDung} onChange={e => setFormData({...formData, muc5_noiDung: e.target.value})} />
                        </div>
                        <div>
                            <span className="font-bold">6. Phạm vi làm việc:</span>
                            <input className="input-line" value={formData.muc6_phamVi} onChange={e => setFormData({...formData, muc6_phamVi: e.target.value})} />
                        </div>
                        <div>
                            <span className="font-bold">7. Thời gian tiến hành công việc:</span>
                            <div className="flex flex-wrap items-center gap-2 mt-1">
                                Từ 
                                <div className="mx-1"><TimeSelect value={formData.muc7_thoiGianTu} onChange={(val) => setFormData({...formData, muc7_thoiGianTu: val})} /></div>
                                đến 
                                <div className="mx-1"><TimeSelect value={formData.muc7_thoiGianDen} onChange={(val) => setFormData({...formData, muc7_thoiGianDen: val})} /></div>
                                , ngày <input type="date" className="w-32 border-b border-gray-300 text-center font-bold" value={formData.muc7_ngay} onChange={e => setFormData({...formData, muc7_ngay: e.target.value})} />
                            </div>
                        </div>
                    </div>

                    {/* 8. ĐÁNH GIÁ RỦI RO */}
                    <div className="mb-6">
                        <div className="font-bold mb-2">8. Kết quả Đánh giá rủi ro của đơn vị công tác:</div>
                        <div className="pl-4">
                            <div className="font-semibold mb-2">a) Kết quả ĐGRR tại hiện trường:</div>
                            
                            <table className="w-full">
                                <thead>
                                    <tr>
                                        <th className="w-10">Stt</th>
                                        <th className="w-1/4">Nhận diện mối nguy</th>
                                        <th className="w-1/4">Mô tả mối nguy</th>
                                        <th className="w-16">Bậc RR</th>
                                        <th>Biện pháp kiểm soát</th>
                                        <th className="w-8"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {formData.ruiRo_items.map((item, index) => (
                                        <tr key={index}>
                                            <td className="text-center">{index + 1}</td>
                                            <td><textarea className="w-full h-full border-none outline-none resize-none bg-transparent" rows="3" value={item.moiNguy} onChange={(e) => updateRiskRow(index, 'moiNguy', e.target.value)}></textarea></td>
                                            <td><textarea className="w-full h-full border-none outline-none resize-none bg-transparent" rows="3" value={item.moTa} onChange={(e) => updateRiskRow(index, 'moTa', e.target.value)}></textarea></td>
                                            <td><input className="w-full text-center border-none outline-none bg-transparent" value={item.bac} onChange={(e) => updateRiskRow(index, 'bac', e.target.value)} /></td>
                                            <td><textarea className="w-full h-full border-none outline-none resize-none bg-transparent" rows="3" value={item.bienPhap} onChange={(e) => updateRiskRow(index, 'bienPhap', e.target.value)}></textarea></td>
                                            <td className="text-center align-middle">
                                                <button onClick={() => removeRiskRow(index)} className="text-red-500"><i data-lucide="trash-2" width="16"></i></button>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                            <button onClick={addRiskRow} className="text-sm text-blue-600 font-semibold flex items-center gap-1 mb-4">
                                <i data-lucide="plus"></i> Thêm dòng rủi ro
                            </button>

                            <div className="font-semibold">b) Ghi chú:</div>
                            <textarea className="input-line" rows="3" value={formData.ruiRo_ghiChu} onChange={e => setFormData({...formData, ruiRo_ghiChu: e.target.value})} placeholder="Các biện pháp bổ sung..."></textarea>
                        </div>
                    </div>

                    {/* 9. TRÁCH NHIỆM */}
                    <div className="mb-6">
                        <div className="font-bold mb-2">9. Trách nhiệm của các đơn vị liên quan:</div>
                        <div className="pl-4 space-y-4">
                            
                            <QuickInputSection 
                                title="a/ Đối với (các) đơn vị quản lý vận hành (Thực hiện cắt điện):"
                                value={formData.muc9a_catDien}
                                onChange={(val) => setFormData({...formData, muc9a_catDien: val})}
                                templates={tags9a}
                                contextData={getContextData()}
                                placeholder="- Cắt CB..."
                            />

                            <QuickInputSection 
                                title="b/ Đối với đơn vị công tác (Biện pháp an toàn):"
                                value={formData.muc9b_anToan}
                                onChange={(val) => setFormData({...formData, muc9b_anToan: val})}
                                templates={tags9b}
                                placeholder="- Chuẩn bị..."
                            />

                            <div>
                                <label className="section-title block text-gray-800">c/ Đối với (các) đơn vị điều độ (nếu có):</label>
                                <textarea className="input-line" rows="2" value={formData.muc9c_dieuDo} onChange={e => setFormData({...formData, muc9c_dieuDo: e.target.value})}></textarea>
                            </div>

                            <div>
                                <label className="section-title block text-gray-800">d/ Những nội dung khác có liên quan đến công việc:</label>
                                <textarea className="input-line" rows="2" value={formData.muc9d_khac} onChange={e => setFormData({...formData, muc9d_khac: e.target.value})}></textarea>
                            </div>
                        </div>
                    </div>

                    {/* FOOTER */}
                    <div className="mt-8 text-justify mb-8">
                        Biên bản này được lập thành <input className="w-10 text-center border-b border-gray-300 font-bold" value={formData.soBan} onChange={e => setFormData({...formData, soBan: e.target.value})} /> bản 
                        và được tất cả mọi người dự họp của các đơn vị có liên quan đến công việc đồng ý, thông qua để làm cơ sở tiến hành công việc sau này.
                    </div>

                    <div className="grid grid-cols-2 gap-8 text-center font-bold text-xs md:text-sm uppercase mb-20">
                        <div>
                            ĐẠI DIỆN ĐƠN VỊ<br/>LÀM CÔNG VIỆC<br/>
                            <div className="h-20"></div>
                            {formData.dvct_daiDien1}
                        </div>
                        <div>
                            ĐẠI DIỆN (CÁC) ĐƠN VỊ<br/>QUẢN LÝ VH<br/>
                            <div className="h-20"></div>
                            {formData.qlvh_daiDien1}
                        </div>
                        <div>
                            ĐẠI DIỆN (CÁC)<br/>ĐƠN VỊ ĐIỀU ĐỘ<br/>
                            <div className="h-20"></div>
                            {/* Ký tên */}
                        </div>
                        <div>
                            ĐẠI DIỆN CÁC<br/>ĐƠN VỊ LIÊN QUAN<br/>
                            <div className="h-20"></div>
                            {/* Ký tên */}
                        </div>
                    </div>

                    {/* Placeholder cho Sơ đồ */}
                    <div className="border-t-2 border-dashed pt-4 mt-8">
                        <div className="font-bold text-center mb-4">SƠ ĐỒ MỘT SỢI KẾT NỐI THIẾT BỊ, LƯỚI ĐIỆN NƠI LÀM VIỆC</div>
                        <div className="h-64 bg-gray-50 border border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400">
                            <i data-lucide="share-2" width="48" height="48" className="mb-2"></i>
                            <span>(Khu vực hiển thị Sơ đồ một sợi từ module vẽ)</span>
                            <button className="mt-2 bg-blue-100 text-blue-600 px-4 py-2 rounded text-sm font-semibold hover:bg-blue-200">
                                Mở Trình Vẽ Sơ Đồ
                            </button>
                        </div>
                    </div>

                </div>
                
                <div className="h-20"></div> {/* Space for fixed footer */}
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</body>
</html>
